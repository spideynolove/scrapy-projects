from requests import get, post
from crawldata.functions import *
from urllib.parse import urlencode
from json import loads
from datetime import datetime, timedelta


headers = {
    'User-Agent': 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/113.0',
    'Content-Type': 'multipart/form-data; boundary=---------------------------48222048032047603611657549096',
}

# data = '-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="securitytoken"\r\n\r\nguest\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="do"\r\n\r\nsaveoptions\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="setdefault"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="ignoreinput"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsLeft1][idSuffix]"\r\n\r\n\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsLeft1][_flexForm_]"\r\n\r\nflexForm\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsLeft1][modelData]"\r\n\r\neyJwYV9sYXlvdXRfaWQiOiJuZXdzIiwicGFfY29tcG9uZW50X2lkIjoiTmV3c0xlZnRPbmUiLCJwYV9jb250cm9scyI6Im5ld3N8TmV3c0xlZnRPbmUiLCJwYV9pbmplY3RyZXZlcnNlIjpmYWxzZSwicGFfaGFyZGluamVjdGlvbiI6ZmFsc2UsInBhX2luamVjdGF0IjpmYWxzZX0=\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsLeft1][stream][]"\r\n\r\n1\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsLeft1][news]"\r\n\r\nall\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsLeft1][format]"\r\n\r\nheadline\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsLeft1][items]"\r\n\r\n15\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsLeft1][sort]"\r\n\r\nlatest\r\n-----------------------------48222048032047603611657549096--\r\n'
# data = '-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="securitytoken"\r\n\r\nguest\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="do"\r\n\r\nsaveoptions\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="setdefault"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="ignoreinput"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight1][idSuffix]"\r\n\r\n\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight1][_flexForm_]"\r\n\r\nflexForm\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight1][modelData]"\r\n\r\neyJwYV9sYXlvdXRfaWQiOiJuZXdzIiwicGFfY29tcG9uZW50X2lkIjoiTmV3c1JpZ2h0T25lIiwicGFfY29udHJvbHMiOiJuZXdzfE5ld3NSaWdodE9uZSIsInBhX2luamVjdHJldmVyc2UiOmZhbHNlLCJwYV9oYXJkaW5qZWN0aW9uIjpmYWxzZSwicGFfaW5qZWN0YXQiOmZhbHNlfQ==\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight1][news]"\r\n\r\nall\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight1][format]"\r\n\r\nlarge\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight1][items]"\r\n\r\n3\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight1][sort]"\r\n\r\nhottest\r\n-----------------------------48222048032047603611657549096--\r\n'
# data = '-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="securitytoken"\r\n\r\nguest\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="do"\r\n\r\nsaveoptions\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="setdefault"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="ignoreinput"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight3][idSuffix]"\r\n\r\n\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight3][_flexForm_]"\r\n\r\nflexForm\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight3][modelData]"\r\n\r\neyJwYV9sYXlvdXRfaWQiOiJuZXdzIiwicGFfY29tcG9uZW50X2lkIjoiTmV3c1JpZ2h0VGhyZWUiLCJwYV9jb250cm9scyI6Im5ld3N8TmV3c1JpZ2h0VGhyZWUiLCJwYV9pbmplY3RyZXZlcnNlIjpmYWxzZSwicGFfaGFyZGluamVjdGlvbiI6ZmFsc2UsInBhX2luamVjdGF0IjpmYWxzZX0=\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight3][news]"\r\n\r\n8\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight3][format]"\r\n\r\nthreads\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight3][items]"\r\n\r\n3\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight3][sort]"\r\n\r\nmostviewed\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight3][period]"\r\n\r\nlast12h\r\n-----------------------------48222048032047603611657549096--\r\n'
# data = '-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="securitytoken"\r\n\r\nguest\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="do"\r\n\r\nsaveoptions\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="setdefault"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="ignoreinput"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight4][idSuffix]"\r\n\r\n\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight4][_flexForm_]"\r\n\r\nflexForm\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight4][modelData]"\r\n\r\neyJwYV9sYXlvdXRfaWQiOiJuZXdzIiwicGFfY29tcG9uZW50X2lkIjoiTmV3c1JpZ2h0Rm91ciIsInBhX2NvbnRyb2xzIjoibmV3c3xOZXdzUmlnaHRGb3VyIiwicGFfaW5qZWN0cmV2ZXJzZSI6ZmFsc2UsInBhX2hhcmRpbmplY3Rpb24iOmZhbHNlLCJwYV9pbmplY3RhdCI6ZmFsc2V9\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight4][news]"\r\n\r\n89\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight4][format]"\r\n\r\nlarge\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight4][items]"\r\n\r\n2\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight4][sort]"\r\n\r\nlatest\r\n-----------------------------48222048032047603611657549096--\r\n'
# data = '-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="securitytoken"\r\n\r\nguest\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="do"\r\n\r\nsaveoptions\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="setdefault"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="ignoreinput"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight2][idSuffix]"\r\n\r\n\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight2][_flexForm_]"\r\n\r\nflexForm\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight2][modelData]"\r\n\r\neyJwYV9sYXlvdXRfaWQiOiJuZXdzIiwicGFfY29tcG9uZW50X2lkIjoiTmV3c1JpZ2h0VHdvIiwicGFfY29udHJvbHMiOiJuZXdzfE5ld3NSaWdodFR3byIsInBhX2luamVjdHJldmVyc2UiOmZhbHNlLCJwYV9oYXJkaW5qZWN0aW9uIjpmYWxzZSwicGFfaW5qZWN0YXQiOmZhbHNlfQ==\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight2][news]"\r\n\r\n107\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight2][format]"\r\n\r\nthreads\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight2][items]"\r\n\r\n3\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight2][sort]"\r\n\r\nmostviewed\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[News_newsRight2][period]"\r\n\r\nlast12h\r\n-----------------------------48222048032047603611657549096--\r\n'
# params = {
#     'more': '1',
# }


# params = {
#     'onlyContent': 'true',
#     'section': 'details',
#     'currency': 'EURGBP',
#     'row': '1',
# }

# # data = '-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="securitytoken"\r\n\r\nguest\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="do"\r\n\r\nsaveoptions\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="setdefault"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="ignoreinput"\r\n\r\nyes\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][idSuffix]"\r\n\r\n\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][_flexForm_]"\r\n\r\nflexForm\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][modelData]"\r\n\r\neyJpc0hvbWVwYWdlIjp0cnVlLCJwYV9sYXlvdXRfaWQiOiJob21lcGFnZSIsInBhX2NvbXBvbmVudF9pZCI6IlRyYWRlUG9zaXRpb25zX0NvcHkxIiwicGFfY29udHJvbHMiOiJob21lcGFnZXxUcmFkZVBvc2l0aW9uc19Db3B5MSIsInBhX2luamVjdHJldmVyc2UiOmZhbHNlLCJwYV9oYXJkaW5qZWN0aW9uIjpmYWxzZSwicGFfaW5qZWN0YXQiOmZhbHNlfQ==\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][trades/positions/type]"\r\n\r\ntraders\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_0]"\r\n\r\nEURUSD\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_1]"\r\n\r\nGBPUSD\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_2]"\r\n\r\nUSDJPY\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_3]"\r\n\r\nUSDCHF\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_4]"\r\n\r\nUSDCAD\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_5]"\r\n\r\nAUDUSD\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_6]"\r\n\r\nNZDUSD\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_7]"\r\n\r\nGBPJPY\r\n-----------------------------48222048032047603611657549096--\r\n'

# data = '-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="securitytoken"\r\n\r\nguest\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="do"\r\n\r\nsaveoptions\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="setdefault"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="ignoreinput"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions/Traders_positionTraders][idSuffix]"\r\n\r\n296480620\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions/Traders_positionTraders][_flexForm_]"\r\n\r\nflexForm\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions/Traders_positionTraders][modelData]"\r\n\r\n\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="currency"\r\n\r\nGBPUSD\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="row"\r\n\r\n1\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions/Traders_positionTraders][trades/positions/traders/type]"\r\n\r\nentry\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions/Traders_positionTraders][trades/positions/traders/private][]"\r\n\r\n1\r\n-----------------------------48222048032047603611657549096--\r\n'
# response = post('https://www.forexfactory.com/flex.php',
#                 # params=params,
#                 # cookies=cookies,
#                 headers=headers,
#                 data=data)

# print(response.text)



# params = {
#     'onlyContent': 'true',
#     'section': 'details',
#     'currency': 'GBPUSD',
#     'row': '1',
# }

# data = '-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="securitytoken"\r\n\r\nguest\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="do"\r\n\r\nsaveoptions\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="setdefault"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="ignoreinput"\r\n\r\nyes\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][idSuffix]"\r\n\r\n\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][_flexForm_]"\r\n\r\nflexForm\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][modelData]"\r\n\r\neyJpc0hvbWVwYWdlIjp0cnVlLCJwYV9sYXlvdXRfaWQiOiJob21lcGFnZSIsInBhX2NvbXBvbmVudF9pZCI6IlRyYWRlUG9zaXRpb25zX0NvcHkxIiwicGFfY29udHJvbHMiOiJob21lcGFnZXxUcmFkZVBvc2l0aW9uc19Db3B5MSIsInBhX2luamVjdHJldmVyc2UiOmZhbHNlLCJwYV9oYXJkaW5qZWN0aW9uIjpmYWxzZSwicGFfaW5qZWN0YXQiOmZhbHNlfQ==\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][trades/positions/type]"\r\n\r\ntraders\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_0]"\r\n\r\nEURUSD\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_1]"\r\n\r\nGBPUSD\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_2]"\r\n\r\nUSDJPY\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_3]"\r\n\r\nUSDCHF\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_4]"\r\n\r\nUSDCAD\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_5]"\r\n\r\nAUDUSD\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_6]"\r\n\r\nNZDUSD\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[Trades/Positions_tradesPositionsCopy1][market/currency_7]"\r\n\r\nGBPJPY\r\n-----------------------------48222048032047603611657549096--\r\n'

# response = post('https://www.forexfactory.com/flex.php', params=params, 
#                          headers=headers, data=data)


params = {
    'more': '0',
}

data = '-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="securitytoken"\r\n\r\nguest\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="do"\r\n\r\nsaveoptions\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="setdefault"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="ignoreinput"\r\n\r\nno\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[InstrumentNews_instrumentNews][idSuffix]"\r\n\r\neurusd\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[InstrumentNews_instrumentNews][_flexForm_]"\r\n\r\nflexForm\r\n-----------------------------48222048032047603611657549096\r\nContent-Disposition: form-data; name="flex[InstrumentNews_instrumentNews][modelData]"\r\n\r\n\r\n-----------------------------48222048032047603611657549096--\r\n'

response = post('https://www.forexfactory.com/flex.php', params=params, headers=headers, data=data)
print(response.text)